#include <iostream>

#include <creek/Exception.hpp>
#include <creek/Expression.hpp>
#include <creek/Scope.hpp>


int main(int argc, char** argv)
{
    using namespace creek;

    // create program
    std::unique_ptr<Expression> program(new ExprBlock({
        std::unique_ptr<Expression>(new ExprPrint(std::unique_ptr<Expression>(new ExprNumber(10)))),
    }));

    // create scope
    Scope scope;

    // try to execute the program
    try
    {
        std::unique_ptr<Data> result(program->eval(scope));
    }
    catch(Exception& e)
    {
        std::cerr << "Creek exception: " << e.message() << ".\n";
    }
    catch(...)
    {
        std::cerr << "Unknown excpetion.\n";
    }

    // print returned value
    std::cout << "Program returned " << result->debug_text() << ".\n";

    return 0;
}
